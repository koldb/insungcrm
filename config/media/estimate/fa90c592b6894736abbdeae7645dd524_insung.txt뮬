입력 과정 시뮬
 
1. 보증기간 3년 표출 / 상태 자동 변동  => 크롤링 제외
출고일자로부터 3년 기간을 표출
2. 견적 - 발주 - 출고 단계 => 시리얼로 핸들링
시리얼은 밑에서 생산, 출고시 입력
입력 단계에서는 제품명으로 입력 - 시리얼 추후 입력  -> DB 저장
* 제품 db 새로 생성 
no / 제품명 / 시리얼 / 출고일자 / 출고업체 / 비고 
* 기존 product_DB는 제품 정보용으로 사용 / 지속 업데이트 예정 => 업데이트 쉽게 할수있도록 기능 추가 

견적 단계에서는 시리얼 미필요
발주 단계에서 시리얼 추가?
출고 단계에서 시리얼 추가?  => 고민 필요

견적 다품종 입력 / 하나로 엮는 기능 필요  어떻게 짤지 구상
3. as 부분 
4. 접수 어제~당일 기준으로 기간 재설정 필요 - 접수건 놓치지않기위해 / 접수, 완료 표출되도록

-견적 + 발주-
#메인 DB / 낱개 DB
1. 메인 DB(견적)
id(pk)/ 견적명(날짜-차례로 묶을지 고민) / 등록일자 / 마감 요청일자 / 업체명 / 요청 사항 / 총금액 / 담당부서 / 담당자 / 완료여부

2. 낱개 db(견적+발주)
id / 메인DB_ID(fk) / 메인db_견적명(fk) / 제품명 / 수량 / 단가 / 부가세 / 총 금액 
생산일자 / 출고일자 / 업체명 / 제품명 / 시리얼 / 보증만료일 / 나머지 항목들 
제품명(자동완성 기능)

3. 리스트
메인 db로 표출
no / 일자 / 견적명(or 날짜-차례) / 업체명 / 총 금액 / 담당부서 / 담당자 / 완료여부
정렬 / 검색기능 구현
클릭시 디테일뷰
디테일 
상기 내용 외 / 낱개 클릭시 해당 낱개db 디테일뷰로 이동
파일 업로드 
완료여부(둘다 볼수있도록)

-발주+출고-
1. 낱개db의 정보 가져와서 추가 입력
id / 낱개db_id(fk) / 생산일자 / 출고일자 / 업체명 / 제품명 / 시리얼 / 보증기간 / 나머지 항목들 / 완료여부
보증기간 = 출고일로부터 3년

2. 리스트
메인db 리스트로 표출
클릭시 디테일
낱개db 표출하고 입력 받기


견적입력(메인) / 견적 메인 수정 뷰 / 견적 리스트(메인) / 견적+발주디테일뷰(제품입력/클릭)(메인+서브) / 낱개db 입력/디테일뷰 -> 견적+발주+출고 한번에(아이디별로 권한 차등 표출)(서브)/ 


id, product_name, quantity, per_price, tax, total_price, production_date, release_date, cname, serial, warranty, m_id, m_title

파일 업로드 코드
   <!--<div class="mb-3">
            <input type="button" class="btn btn-primary" onclick="location.href='{% url 'isscm:uploadFile' detailView.no %}'" value="파일 업로드">
            {% if upfile %}
            {% for file in upfile %}
            <input type="button" value="{{ file.title }}" class="btn btn-primary" disabled >
            {% endfor %}
            {% else %}
            <td>첨부 파일 없음</td>
            {% endif %}
        </div>-->

삭제 코드

<!--차트 부분-->
{% if login_session == 'insung' %}
<div class="access-chart__card " style="float:left; width: 50%;">
    <div class="card__title">
        <h4 style="text-align : center; font-weight: bold;">주간 팀별 견적 현황</h4>
    </div>
    <div class="card__chartWrapper">
        <canvas id="sheet_chart" width="800" height="300"></canvas>
    </div>
</div>

<!--주간, 월간 실적현황 표-->
<div class="col-xl-3 col-md-6 mb-4" style="float:right; width: 50%;">
    <div class="card border-left-primary shadow h-100 py-2">
        <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1" style="font-weight:bold; font-size: 21px;">
                        주간 팀별 견적 현황
                    </div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                        <table style="text-align: center;">
                            <tr>
                                <th>담당 팀</th>
                                <th>견적</th>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; color: #A6A6A6;">영업 1팀</td>
                                <td>{{es_week1.total_price__sum|intcomma}}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; color: #6799FF;">영업 2팀</td>
                                <td>{{es_week2.total_price__sum|intcomma}}</td>
                            </tr>
                            <tr style="font-weight: bold">
                                <td>합계</td>
                                <td>{{  es_week3.total_price__sum|intcomma }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card border-left-primary shadow h-100 py-2">
        <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1" style="font-weight:bold; font-size: 21px;">
                        월간 팀별 견적 현황
                    </div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                        <table style="text-align: center;">
                            <tr>
                                <th>담당 팀</th>
                                <th>견적</th>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; color: #A6A6A6;">영업 1팀</td>
                                <td>{{es_month1.total_price__sum|intcomma}}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; color: #6799FF;">영업 2팀</td>
                                <td>{{es_month2.total_price__sum|intcomma}}</td>
                            </tr>
                            <tr style="font-weight: bold">
                                <td>합계</td>
                                <td>{{  es_month3.total_price__sum|intcomma }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--담당자별 현황-->
<div class="row" style="padding: 20px 0px 20px 20px; width: 100%;">
    <div class="col-xl-3 col-md-6 mb-4" style="float:left; width: 50%; ">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1" style="font-weight:bold; font-size: 21px;"  >
                            주간 담당자별 견적 현황</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">
                            <table style="text-align: center;">
                                <tr>
                                    <th>담당자</th>
                                    <th>실적</th>
                                </tr>
                                {% for es in es_cweek1_total %}
                                <tr>
                                    <td>{{ es.user_name }}</td>
                                    <td>{{ es.sum|intcomma }}</td>
                                </tr>
                                {% endfor %}
                                <tr style="font-weight: bold">
                                    <td>합계</td>
                                    <td>{{  es_cweek1_sum.total_price__sum|intcomma }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4" style="float:right; width: 50%;">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1" style="font-weight:bold; font-size: 21px;"  >
                            월간 담당자별 견적 현황</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">
                            <table style="text-align: center;">
                                <tr>
                                    <th>담당자</th>
                                    <th>실적</th>
                                </tr>
                                {% for es in es_cmonth1_total %}
                                <tr>
                                    <td>{{ es.user_name }}</td>
                                    <td>{{ es.sum|intcomma }}</td>
                                </tr>
                                {% endfor %}
                                <tr style="font-weight: bold">
                                    <td>합계</td>
                                    <td>{{  es_cmonth1_sum.total_price__sum|intcomma }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>
  var sheet_chart = {{sheet_chart}}

  var sheet = document.getElementById('sheet_chart').getContext('2d');
var sheet_chart = new Chart(sheet, {
    type: 'pie',
    data:{
        labels: [ '영업1팀', '영업2팀' ],
        datasets: [{
            data: sheet_chart,
            backgroundColor: [
                "#f7323f",
                "#673ba7"
            ],
            borderWidth: 1
        }]
    }

});
</script>

{% endif %}


<div>
    <table class="board">
        <thead>
        {% if page_obj %}
        <tr class="header" style="text-align:center;">
            <th style="width:5%;">순번</th>
            <th style="width:5%;">제품명</th>
            <th style="width:5%;">수량</th>
            <th style="width:5%;">개당 단가</th>
            <th style="width:5%;">부가세</th>
            <th style="width:5%;">총 금액</th>
            <th style="width:5%;">생산 일자</th>
            <th style="width:5%;">출고 일자</th>
            <th style="width:5%;">업체명</th>
            <th style="width:5%;">시리얼</th>
            <th style="width:5%;">보증 기간</th>
        </tr>
        </thead>
        <tbody>

        {% for list in page_obj %}
        <tr class="m" style="text-align:center;" onclick="location.href='{% url 'isscm:main_detail' list.id %}'">
            <td>{{ page_obj.paginator.count|sub:page_obj.start_index|sub:forloop.counter0|add:1  }}</td>
            <td>{{ list.rg_date|date:'Y-m-d' }}</td>
            {% if list.rp_date == None %}
            <td> </td>
            {% else %}
            <td>{{ list.rp_date|date:'Y-m-d' }}</td>
            {% endif %}
            <td>{{ list.main_title }}</td>
            <td>{{ list.cname }}</td>
            <td>{{ list.requests | truncatewords:10 }}</td>
            {% if list.total_price == None %}
            <td>    </td>
            {% else %}
            <td>{{ list.total_price|intcomma }}</td>
            {% endif %}
            {% if list.finish == None or list.user_dept == None %}
            <td>  </td>
            <td>  </td>
            <td>  </td>
            {% else %}
            <td>{{ list.finish }}</td>
            <td>{{ list.user_dept }} </td>
            <td>{{ list.user_name }} </td>
            {% endif %}
        </tr>
        {% endfor %}

        {% else %}
        <tr><h2>등록 된 견적 글이 없습니다.</h2></tr>
        {% endif %}
        </tbody>
    </table>

</div>


인덱스 기존꺼
def index(request):
    login_session = request.session.get('login_session')

    # 1일 기준 신규 접수 현황
    es_count = EstimateSheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1)).count()
    es_pcount = EstimateSheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1),
                                             cname=login_session).count()
    es_fcount = EstimateSheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1),
                                             finish="종료").count()
    as_count = ASsheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1)).count()
    as_pcount = ASsheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1),
                                       cname=login_session).count()
    as_fcount = ASsheet.objects.filter(rp_date=date.today() - datetime.timedelta(days=1), finish="종료").count()
    or_count = Ordersheet.objects.filter(rp_date=date.today() - datetime.timedelta(days=1)).count()
    or_pcount = Ordersheet.objects.filter(rp_date=date.today() - datetime.timedelta(days=1),
                                          cname=login_session).count()
    que_count = question_sheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1)).count()
    que_pcount = question_sheet.objects.filter(rg_date=date.today() - datetime.timedelta(days=1),
                                               cname=login_session).count()

    # 주간 실적 현황
    es_week1 = EstimateSheet.objects.filter(rg_date__gte=date.today() - datetime.timedelta(weeks=1),
                                            user_dept='영업1팀').aggregate(Sum('total_price'))
    es_week2 = EstimateSheet.objects.filter(rg_date__gte=date.today() - datetime.timedelta(weeks=1),
                                            user_dept='영업2팀').aggregate(Sum('total_price'))
    or_week1 = Ordersheet.objects.filter(rp_date__gte=date.today() - datetime.timedelta(weeks=1),
                                         user_dept='영업1팀').aggregate(Sum('total_price'))
    or_week2 = Ordersheet.objects.filter(rp_date__gte=date.today() - datetime.timedelta(weeks=1),
                                         user_dept='영업2팀').aggregate(Sum('total_price'))

    # 월간 실적 현황
    es_month1 = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1),
                                             user_dept='영업1팀').aggregate(Sum('total_price'))
    es_month2 = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1),
                                             user_dept='영업2팀').aggregate(Sum('total_price'))
    or_month1 = Ordersheet.objects.filter(rp_date__gte=date.today() - relativedelta(months=1),
                                          user_dept='영업1팀').aggregate(Sum('total_price'))
    print(or_month1)
    or_month2 = Ordersheet.objects.filter(rp_date__gte=date.today() - relativedelta(months=1),
                                          user_dept='영업2팀').aggregate(Sum('total_price'))
    print(or_month2)

    # 제품별 월간 견적, 발주, AS 개수
    es_num = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'product_name').order_by('product_name').annotate(count=Sum('quantity'))
    es_num_sum = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).aggregate(
        Sum('quantity'))
    or_num = Ordersheet.objects.filter(rp_date__gte=date.today() - relativedelta(months=1)).values(
        'product_name').order_by('product_name').annotate(count=Sum('quantity'))
    print(or_num)
    or_num_sum = Ordersheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).aggregate(
        Sum('quantity'))
    as_num = ASsheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'product_name').order_by('product_name').annotate(count=Sum('quantity'))
    as_num_sum = ASsheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).aggregate(
        Sum('quantity'))

    # 업체별 월간 견적, 발주, AS 개수
    es_cnum = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'cname').order_by('cname').annotate(count=Count('cname'))
    es_cnum_sum = EstimateSheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'cname').order_by('cname').annotate(count=Count('cname')).aggregate(Sum('count'))
    or_cnum = Ordersheet.objects.filter(rp_date__gte=date.today() - relativedelta(months=1)).values('cname').order_by(
        'cname').annotate(count=Count('cname'))
    or_cnum_sum = Ordersheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'cname').order_by('cname').annotate(count=Count('cname')).aggregate(Sum('count'))
    print(or_cnum_sum)
    as_cnum = ASsheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values('cname').order_by(
        'cname').annotate(count=Count('cname'))
    as_cnum_sum = ASsheet.objects.filter(rg_date__gte=date.today() - relativedelta(months=1)).values(
        'cname').order_by('cname').annotate(count=Count('cname')).aggregate(Sum('count'))

    context = {'login_session': login_session, 'es_count': es_count, 'as_count': as_count, 'or_count': or_count,
               'que_count': que_count,
               'es_week1': es_week1, 'es_week2': es_week2, 'or_week1': or_week1, 'or_week2': or_week2,
               'es_month1': es_month1, 'es_month2': es_month2, 'or_month1': or_month1, 'or_month2': or_month2,
               'es_num': es_num, 'or_num': or_num, 'as_num': as_num,
               'es_cnum': es_cnum, 'or_cnum': or_cnum, 'as_cnum': as_cnum, 'es_fcount': es_fcount,
               'as_fcount': as_fcount, 'es_pcount': es_pcount,
               'as_pcount': as_pcount, 'or_pcount': or_pcount, 'que_pcount': que_pcount, 'es_num_sum': es_num_sum,
               'or_num_sum': or_num_sum,
               'as_num_sum': as_num_sum, 'es_cnum_sum': es_cnum_sum, 'or_cnum_sum': or_cnum_sum,
               'as_cnum_sum': as_cnum_sum}
    return render(request, 'isscm/index.html', context)

인덱스 원본(윗부분 조금 뜯어고쳣음)
{% extends "base/base2.html" %}
{% block content %}
{% load humanize %}
<style>
  table {
    width: 100%;
    border: 1px solid #dcdcdc;
    border-collapse: collapse;
  }
  th, td {
    border: 1px solid #dcdcdc;
    text-align: center;
  }
  textarea {
    width: 100%;
    height: 15em;
  }


</style>

{% if login_session == 'insung' %}
<div class="container-fluid">
    <!-- 1일 기준 신규 접수 현황 -->
    <div class="row">
        <h2>금일 기준 진행 현황</h2>
        <!--일별 견적 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4"  style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                접수 / 진행 / 종료</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ es_count }}  / {{ es_icount }} / {{ es_fcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--일별 AS 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                AS 접수 / 완료 </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ as_count }}  /  {{ as_fcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--일별 문의 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                문의 사항</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ que_count }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 주간 / 월간 실적 현황 -->
    <div class="row"  style="float:left; width: 50%;">
        <h2 style="display:inline;">주간 실적 현황</h2>
        <!--주간 견적 실적-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 50%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                견적 실적(1팀/2팀)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <b>{{ es_week1.total_price__sum|intcomma }}</b> / <b>{{ es_week2.total_price__sum|intcomma }}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--주간 발주 실적-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 50%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                발주 실적(1팀/2팀)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <b>{{ or_week1.total_price__sum|intcomma }}</b> / <b>{{ or_week2.total_price__sum|intcomma }}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="float:right; width: 50%;">
        <h2 style="display:inline;">월간 실적 현황</h2>
        <!--월간 견적 실적-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 50%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                견적 실적(1팀/2팀)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <b>{{ es_month1.total_price__sum|intcomma }}</b> / <b>{{ es_month2.total_price__sum|intcomma }}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--월간 발주 실적-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 50%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                발주 실적(1팀/2팀)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <b>{{ or_month1.total_price__sum|intcomma }}</b> / <b>{{ or_month2.total_price__sum|intcomma }}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 제품별 견적, 발주, as 월간 현황 -->
    <div class="row" style="float:left; width: 100%;">
        <h2>제품별 견적, 발주, AS 월간 현황</h2>
        <!--월간 제품별 견적 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                견적 현황</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th>제품명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for ep in es_num %}
                                    <tr>
                                        <td style="width: 90%;">{{ ep.product_name }}</td>
                                        <td>{{ ep.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ es_num_sum.quantity__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--월간 제품별 발주 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                발주 접수</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th style="width: 90%;">제품명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for or in or_num %}
                                    <tr>
                                        <td>{{ or.product_name }}</td>
                                        <td>{{ or.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ or_num_sum.quantity__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--월간 제품별 AS 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                AS 현황</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th style="width: 90%;">제품명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for as in as_num %}
                                    <tr>
                                        <td>{{ as.product_name }}</td>
                                        <td>{{ as.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ as_num_sum.quantity__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 업체별 견적, 발주, as 월간 현황 -->
    <div class="row" style="clear: both; width: 100%;">
        <h2>업체별 견적, 발주, AS 월간 현황</h2>
        <!--월간 업체별 견적 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                견적 현황</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th>업체명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for ep in es_cnum %}
                                    <tr>
                                        <td>{{ ep.cname }}</td>
                                        <td>{{ ep.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ es_cnum_sum.count__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--월간 업체별 발주 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                발주 접수</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th>업체명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for or in or_cnum %}
                                    <tr>
                                        <td>{{ or.cname }}</td>
                                        <td>{{ or.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ or_cnum_sum.count__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--월간 업체별 AS 현황-->
        <div class="col-xl-3 col-md-6 mb-4" style="width: 33%;">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                AS 현황</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                <table>
                                    <tr>
                                        <th>업체명</th>
                                        <th>수량</th>
                                    </tr>
                                    {% for as in as_cnum %}
                                    <tr>
                                        <td>{{ as.cname }}</td>
                                        <td>{{ as.count }}</td>
                                    </tr>
                                    {% endfor %}
                                    <td style="font-weight: bold">합계</td>
                                    <td style="font-weight: bold">{{ as_cnum_sum.count__sum }}</td>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% elif login_session %}

<div class="container-fluid">
    <div class="row">
        <h2>신규 등록 현황_전일 기준</h2>
        <!--일별 견적 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                신규 견적</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ es_pcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--일별 발주 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                신규 발주</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ or_pcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--일별 AS 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                신규 AS</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ as_pcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--일별 문의 접수 현황-->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                신규 문의</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><b>{{ que_pcount }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% else %}
<h2>로그인 후 사용 가능 합니다.</h2>


{% endif %}


{% endblock %}